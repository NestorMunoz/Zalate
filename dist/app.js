"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(){var zalate={lat:20.395417,lng:-103.135747};google.maps.event.addDomListener(window,"load",function(){var map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:zalate});new google.maps.Marker({map:map,position:zalate,title:"El Zalate",visible:!0});UserLocation.get(function(coords){var origin=new google.maps.LatLng(coords.lat,coords.lng),destination=new google.maps.LatLng(zalate.lat,zalate.lng),service=new google.maps.DistanceMatrixService;service.getDistanceMatrix({origins:[origin],destinations:[destination],travelMode:google.maps.TravelMode.DRIVING},function(response,status){if(status===google.maps.DistanceMatrixStatus.OK){var travel=response.rows[0].elements[0],travel_duration=travel.duration.text,travel_distance=travel.distance.text;document.querySelector("#map-info").innerHTML="Estás a "+travel_distance+" y llegarias en "+travel_duration+" al mejor lugar en Atequiza"}})})})}();var UserLocation=function(){function UserLocation(){_classCallCheck(this,UserLocation)}return _createClass(UserLocation,null,[{key:"get",value:function(callback){return navigator.geolocation?void navigator.geolocation.getCurrentPosition(function(location){callback({lat:location.coords.latitude,lng:location.coords.longitude})}):(alert("No es posible detectar tu localización con tu navegador y/o dispositivo."),{lat:0,lng:0})}}]),UserLocation}();$.fn.formObject=function(){var form={};return $.each($(this).serializeArray(),function(i,field){form[field.name]=field.value||""}),form},navigator.serviceWorker&&navigator.serviceWorker.register("/offline/sw.js"),function(){function checkScroll(){var inBottom=isInBottom();inBottom&&!sticky?(sticky=!0,stickNavigation()):!inBottom&&sticky&&(sticky=!1,unStickNavigation())}function stickNavigation(){$("#description").addClass("fixed").removeClass("absolute"),$("#navigation").slideUp(),$("#sticky-navigation").slideDown()}function unStickNavigation(){$("#description").removeClass("fixed").addClass("absolute"),$("#navigation").slideDown(),$("#sticky-navigation").slideUp()}function isInBottom(){var $description=$("#description"),descriptionHeight=$description.height();return $(window).scrollTop()>$(window).height()-2*descriptionHeight}function isOpen(){var current_hour=(new Date).getHours(),current_mins=(new Date).getMinutes();(current_hour>18||0==current_hour&&current_mins<30)&&$("#schedule .schedule").html("Abierto ahora")}function toggleNav(){$("#responsive-nav ul").toggleClass("active"),$("#menu-opener").toggleClass("glyphicon-menu-hamburger")}var currentPosition=0,imageCounter=$("[data-name='image-counter']").attr("content");setInterval(function(){currentPosition<imageCounter?currentPosition++:currentPosition=0,$("#gallery .inner").css({left:"-"+100*currentPosition+"%"})},3e3);var sticky=!1;$("#sticky-navigation").removeClass("hidden"),$("#sticky-navigation").slideUp(0),checkScroll(),isOpen(),$(window).scroll(checkScroll),$("#menu-opener").on("click",toggleNav),$(".menu-link").on("click",toggleNav)}(),function(){function focus_step($el){$(".step.active").removeClass("active"),$el.addClass("active"),$el.find(".input").focus();var position=2*$el.index(".step")+1;$(".path-step.active").removeClass("active"),$(".path-step:nth-child("+position+")").addClass("active")}function focus_indicator($el){$(".path-step.active").removeClass("active"),$el.addClass("active")}function validate_form(){if(is_form_valid(form))sendForm();else{var $el=form.find(".input:invalid").first().parent();focus_step($el)}}function is_form_valid(){return document.querySelector("#contact-form").checkValidity()}function sendForm(){var $form=form;$.ajax({url:$form.attr("action"),method:"POST",data:$form.formObject(),dataType:"json",success:function(){$form.slideUp(),$("#info-contact").html("Enviamos tu mensaje, pronto nos pondremos en contacto.")}})}var form=$("#contact-form");$(form).find(".input").on("change",function(evt){var $input=$(evt.target),$next_input=$input.parent().next(".step"),is_valid=is_form_valid();!is_valid&&$next_input.length>0?focus_step($next_input):validate_form()}),$(".path-step").on("click",function(evt){var $current_circle=$(evt.target);focus_indicator($current_circle);var position=$current_circle.index(".path-step")+1;focus_step($(".step:nth-child("+position+")"))}),$(".step textarea").on("keydown",function(evt){13===evt.keyCode&&(evt.preventDefault(),$(evt.target).blur())});$("#contact-form").on("submit",function(evt){return evt.preventDefault(),sendForm($(this)),!1})}();